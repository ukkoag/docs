"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[65],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),d=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=d(e.components);return a.createElement(s.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),u=d(n),m=r,g=u["".concat(s,".").concat(m)]||u[m]||c[m]||i;return n?a.createElement(g,l(l({ref:t},p),{},{components:n})):a.createElement(g,l({ref:t},p))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=m;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[u]="string"==typeof e?e:r,l[1]=o;for(var d=2;d<i;d++)l[d]=n[d];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},3812:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>i,metadata:()=>o,toc:()=>d});var a=n(7462),r=(n(7294),n(3905));const i={slug:"proposed",title:"Analytics API",authors:[{name:"Riyad Parvez",title:"Senior Software Engineer",url:"https://github.com/riyadparvez",image_url:"https://github.com/JoelMarcey.png"}],tags:["api"]},l=void 0,o={unversionedId:"proposed",id:"proposed",title:"Analytics API",description:"IMPORTANT",source:"@site/docs/proposed.md",sourceDirName:".",slug:"/proposed",permalink:"/docs/docs/proposed",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/proposed.md",tags:[{label:"api",permalink:"/docs/docs/tags/api"}],version:"current",frontMatter:{slug:"proposed",title:"Analytics API",authors:[{name:"Riyad Parvez",title:"Senior Software Engineer",url:"https://github.com/riyadparvez",image_url:"https://github.com/JoelMarcey.png"}],tags:["api"]},sidebar:"tutorialSidebar",previous:{title:"Weather Station API",permalink:"/docs/docs/intro"}},s={},d=[{value:"IMPORTANT",id:"important",level:2},{value:"Overview",id:"overview",level:2},{value:"Authentication",id:"authentication",level:3},{value:"Rate Limit / Resource Limit / Pagination",id:"rate-limit--resource-limit--pagination",level:3},{value:"Error Reporting and Debugging",id:"error-reporting-and-debugging",level:3},{value:"Data Format",id:"data-format",level:3},{value:"Endpoints",id:"endpoints",level:2},{value:"Get Fields",id:"get-fields",level:3},{value:"Response",id:"response",level:4},{value:"Create a field",id:"create-a-field",level:3},{value:"Request",id:"request",level:4},{value:"Update a field",id:"update-a-field",level:3},{value:"Request",id:"request-1",level:4},{value:"Delete a field",id:"delete-a-field",level:3},{value:"Get Advisories",id:"get-advisories",level:3},{value:"Request",id:"request-2",level:4},{value:"Response",id:"response-1",level:4},{value:"Get Disease Risk Values",id:"get-disease-risk-values",level:3},{value:"Request",id:"request-3",level:4},{value:"Response",id:"response-2",level:4}],p={toc:d},u="wrapper";function c(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"important"},"IMPORTANT"),(0,r.kt)("p",null,"This is a proposed API spec. The actual API spec might differ from this, although not heavily."),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("h3",{id:"authentication"},"Authentication"),(0,r.kt)("p",null,"The given ",(0,r.kt)("inlineCode",{parentName:"p"},"api_key")," for the client should be set in query paramters in every request."),(0,r.kt)("h3",{id:"rate-limit--resource-limit--pagination"},"Rate Limit / Resource Limit / Pagination"),(0,r.kt)("p",null,"Right now to keep implementation simple we will not implement any pagination or rate/resource limit."),(0,r.kt)("h3",{id:"error-reporting-and-debugging"},"Error Reporting and Debugging"),(0,r.kt)("p",null,"We strongly recommend setting ",(0,r.kt)("inlineCode",{parentName:"p"},"X-REQUEST-ID")," header to UUID in each request. This will help us debug requests that failed. ",(0,r.kt)("inlineCode",{parentName:"p"},"X-REQUEST-ID")," header will also be set in response."),(0,r.kt)("h3",{id:"data-format"},"Data Format"),(0,r.kt)("p",null,"Timestamps and dates should be in ",(0,r.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/ISO_8601"},"ISO 8601")," format and in UTC timezone.\nThe API follows this convention: timestamps are in UTC timezone and dates (usually denoted by ",(0,r.kt)("inlineCode",{parentName:"p"},"local_date"),") are in local timezone."),(0,r.kt)("h2",{id:"endpoints"},"Endpoints"),(0,r.kt)("h3",{id:"get-fields"},"Get Fields"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET https://external.ukkoag.com/v0.1/field")),(0,r.kt)("h4",{id:"response"},"Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Returns all the accessible fields.\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'[   \n    {\n        "uuid": "string",\n        "name": "string",\n        "latitude": "",\n        "longitude": "",\n        "crop": "string",\n        "created_timestamp": "ISO format. UTC timezone",\n        "planting_date": "ISO format. Local timezone",\n        "subscribed_models": [\n            "Lateblight",\n            "Earlyblight"\n        ]\n    },\n    {\n        "uuid": "string",\n        "name": "string",\n        "latitude": "",\n        "longitude": "",\n        "crop": "string",\n        "created_timestamp": "ISO format. UTC timezone",\n        "planting_date": "ISO format. Local timezone",\n        "subscribed_models": [\n            "Lateblight",\n            "Earlyblight"\n        ]\n    }\n]\n')),(0,r.kt)("h3",{id:"create-a-field"},"Create a field"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"POST https://external.ukkoag.com/v0.1/field")),(0,r.kt)("h4",{id:"request"},"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "string",\n    "latitude": "",\n    "longitude": "",\n    "crop": "string",\n    "planting_date": "ISO format. Local timezone",\n}\n')),(0,r.kt)("h3",{id:"update-a-field"},"Update a field"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"PATCH https://external.ukkoag.com/v0.1/field/<field_uuid>")),(0,r.kt)("h4",{id:"request-1"},"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "string",\n    "latitude": "",\n    "longitude": "",\n    "crop": "string",\n    "planting_date": "ISO format. Local timezone",\n}\n')),(0,r.kt)("h3",{id:"delete-a-field"},"Delete a field"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"DELETE https://external.ukkoag.com/v0.1/field/<field_id>")),(0,r.kt)("h3",{id:"get-advisories"},"Get Advisories"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET https://external.ukkoag.com/v0.1/disease/advisories/<field_id>/<model_name>?start_date=iso_format&end_date=iso_format")),(0,r.kt)("h4",{id:"request-2"},"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"model_name:\nNOT optional. Must be one of the values in `subscribed_models` array the response of get fields endpoint.\n\nstart_date:\nOPTIONAL.\nend_date:\nOPTIONAL.\n\nIf both start_date and end_date are missing, advisories from current date to the future dates (the actual number of days predicted ahead varies by disease models) will be returned.\n")),(0,r.kt)("h4",{id:"response-1"},"Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"One advisory per day.\n\n* HIGH: \n* MEDIUM: \n* LOW: \n* DISABLED: can be for different reasons such as planting date, crop or cultivars input are missing.\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "field_id": "",\n    "model": "",\n    "advisories": [\n        {\n            "local_date": "",\n            "urgency": "HIGH/MEDIUM/LOW/DISABLED"\n        },\n        {\n            "local_date": "",\n            "urgency": "HIGH/MEDIUM/LOW/DISABLED"\n        }\n    ]\n}\n')),(0,r.kt)("h3",{id:"get-disease-risk-values"},"Get Disease Risk Values"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"GET https://external.ukkoag.com/v0.1/disease/risk/<field_id>/<model_name>?start_date=iso_format&end_date=iso_format")),(0,r.kt)("h4",{id:"request-3"},"Request"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"field_id: \n\nmodel_name:\nNOT optional. Must be one of the values in `subscribed_models` array the response of get fields endpoint.\n\nstart_date:\nOPTIONAL.\nend_date:\nOPTIONAL.\n\nReturns disease risk data between `start_date` and `end_date`. Both ends are INCLUSIVE.\n`end_date` can be nullable. In that case the API will return all the data upto the current date.\nIf both `start_date` and `end_date` are absent, then the readings for the most recent\n24 hours will be returned.\n")),(0,r.kt)("h4",{id:"response-2"},"Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"`field_id`: ID of the field.\n\nHourly/daily (depending on the disease model) disease risk. If it's hourly the time will be in UTC timezone. If it's daily then it will be the date in the local timezone.\n\nNOTE: Disease risk values are NOT guaranteed to be immutable or non-nullable. As the risk depends on the weather forecast.\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "field_id": "string",\n    "model": "",   \n    "disease_risk": [\n        {\n            "local_date": "ISO format. Local timezone. Daily",\n            "value": "float"\n        },\n        {\n            "local_date": "ISO format. Local timezone. Daily",\n            "value": "float"\n        }\n    ]\n}\n')))}c.isMDXComponent=!0}}]);